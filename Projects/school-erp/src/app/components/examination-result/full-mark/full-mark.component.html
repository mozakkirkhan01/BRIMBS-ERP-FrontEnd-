<app-progress *ngIf="dataLoading"></app-progress>
<main class="main" *ngIf="action.ResponseReceived">
    <div class="row">
        <div class="pagetitle col-sm-8">
            <h1>{{action.MenuTitle}}</h1>
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a routerLink="admin/admin-dashboard">Home</a></li>
                    <li class="breadcrumb-item">{{action.ParentMenuTitle}}</li>
                    <li class="breadcrumb-item active">{{action.MenuTitle}}</li>
                </ol>
            </nav>
        </div>
    </div>
    <section class="section dashboard">
        <div class="card">
            <div class="card-body ">
                <form #formFullMark="ngForm">
                    <div class="row">
                        <mat-form-field appearance="outline" class="col-sm-2 mb-1">
                            <mat-label>Select Session</mat-label>
                            <mat-select #SessionId="ngModel" (selectionChange)="getEntryFullMarkList()" name="SessionId"
                                [(ngModel)]="FilterModel.SessionId" required [autofocus]="true">
                                <mat-option [value]="e1.SessionId"
                                    *ngFor="let e1 of SessionList">{{e1.SessionName}}</mat-option>
                            </mat-select>
                            <mat-error>
                                Session is <strong>required</strong>
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline" class="col-sm-2 mb-1">
                            <mat-label>Select Class</mat-label>
                            <mat-select #ClassId="ngModel" (selectionChange)="getEntryFullMarkList()" name="ClassId"
                                [(ngModel)]="FilterModel.ClassId" required [autofocus]="true">
                                <mat-option [value]="e1.ClassId"
                                    *ngFor="let e1 of ClassList">{{e1.ClassName}}</mat-option>
                            </mat-select>
                            <mat-error>
                                Class is <strong>required</strong>
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline" class="col-sm-2 mb-1">
                            <mat-label>Select Term</mat-label>
                            <mat-select #Term="ngModel" (selectionChange)="getEntryFullMarkList()" name="Term"
                                [(ngModel)]="FilterModel.Term" required [autofocus]="true">
                                <mat-option [value]="e1.Key" *ngFor="let e1 of TermList">{{e1.Value}}</mat-option>
                            </mat-select>
                            <mat-error>
                                Class is <strong>required</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                </form>
                <div class="row">
                    <div class="col-sm-6" [ngClass]="{'col-sm-12' :s1.IsPractical }"
                        *ngFor="let s1 of FullMarkList;let i1 = index">
                        <h3 class="header-text">{{i1+1+". "+s1.SubjectName}}</h3>
                        <div class="table-container overflow-auto">
                            <table class="table table-bordered table-hover">
                                <thead>
                                    <tr>
                                        <th rowspan="2">#</th>
                                        <th rowspan="2">Exam</th>
                                        <th *ngIf="s1.IsTheory" colspan="2" class="text-center">Theory Marks</th>
                                        <th *ngIf="s1.IsPractical" colspan="2" class="text-center">Practical Marks</th>
                                    </tr>
                                    <tr>
                                        <th *ngIf="s1.IsTheory" class="text-center">Full Marks</th>
                                        <th *ngIf="s1.IsTheory" class="text-center">Passing Marks</th>
                                        <th *ngIf="s1.IsPractical" class="text-center">Full Marks</th>
                                        <th *ngIf="s1.IsPractical" class="text-center">Passing Marks</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of s1.FullMarkList ; let i2 = index;">
                                        <th>{{i2+ 1}}</th>
                                        <th>{{item.ExamName}}</th>
                                        <td *ngIf="s1.IsTheory" class="text-center">
                                            <input *ngIf="s1.IsTheory && item.IsTheory"
                                                (change)="changeTheoryFM(item,i1)" type="number" class="form-control"
                                                style="width: 100px;" [(ngModel)]="item.TheoryFullMarks">
                                        </td>
                                        <td *ngIf="s1.IsTheory" class="text-center">
                                            <input *ngIf="s1.IsTheory && item.IsTheory"
                                                (change)="changeTheoryPM(item,i1)" type="number" class="form-control"
                                                style="width: 100px;" [(ngModel)]="item.TheoryPassingMarks">
                                        </td>
                                        <td *ngIf="s1.IsPractical" class="text-center">
                                            <input *ngIf="s1.IsPractical && item.IsPractical"
                                                (change)="changePracticalFM(item,i1)" type="number" class="form-control"
                                                style="width: 100px;" [(ngModel)]="item.PracticalFullMarks">
                                        </td>
                                        <td *ngIf="s1.IsPractical" class="text-center">
                                            <input *ngIf="s1.IsPractical && item.IsPractical"
                                                (change)="changePracticalPM(item,i1)" type="number" class="form-control"
                                                style="width: 100px;" [(ngModel)]="item.PracticalPassingMarks">
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>


                </div>
            </div>
            <div class="card-footer text-center" *ngIf="FullMarkList.length > 0">
                <button type="button" mat-raised-button (click)="FullMarkList =[]" color="warn"
                    class="me-2">Cancel</button>
                <button mat-raised-button color="primary" (click)="saveFullMark()">Submit</button>
            </div>
        </div>
    </section>
</main>